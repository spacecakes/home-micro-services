http:
  middlewares:
    # auth:
    #   basicauth:
    #     users:
    #       - '{{env "BASIC_AUTH_USERNAME"}}:{{env "BASIC_AUTH_PASSWORD_HASH"}}'

    default-headers:
      headers:
        frameDeny: true
        sslRedirect: true
        browserXssFilter: true
        contentTypeNosniff: true
        forceSTSHeader: true
        stsIncludeSubdomains: true
        stsPreload: true
        stsSeconds: 31536000

    # default-whitelist:
    #   ipWhiteList:
    #     sourceRange:
    #       - '10.0.0.0/24'
    #       - '192.168.0.0/16'
    #       - '172.0.0.0/8'

  routers:
    global-headers:
      rule: 'HostRegexp(`{any:.+}`)'
      entryPoints:
        - websecure
      middlewares:
        - default-headers
      service: noop@internal

    synology:
      rule: 'Host(`dsm.app.gabriellundmark.com`)'
      service: synology

    unifi:
      rule: 'Host(`unifi.app.gabriellundmark.com`)'
      service: unifi

    proxmox:
      rule: 'Host(`proxmox.app.gabriellundmark.com`)'
      service: proxmox

  services:
    synology:
      loadBalancer:
        servers:
          - url: 'https://10.0.1.2:5001'
        passHostHeader: true

    unifi:
      loadBalancer:
        servers:
          - url: 'https://10.0.1.1'
        passHostHeader: true

    proxmox:
      loadBalancer:
        servers:
          - url: 'https://10.0.1.6:8006'
        passHostHeader: true
